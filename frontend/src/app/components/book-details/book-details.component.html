<div class="book-details-container">
  <app-header></app-header>
  
  <div class="content">
    <div *ngIf="loading" class="loading-spinner">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
    
    <div *ngIf="!loading && !book" class="no-data">
      <p>Book not found.</p>
      <button mat-raised-button color="primary" routerLink="/books">Back to Books</button>
    </div>
    
    <div *ngIf="!loading && book" class="book-details">
      <div class="back-button">
        <button mat-button color="primary" routerLink="/books">
          <mat-icon>arrow_back</mat-icon> Back to Books
        </button>
      </div>
      
      <div class="book-card-container">
        <mat-card class="book-card">
          <mat-card-header>
            <mat-card-title>{{book.title}}</mat-card-title>
            <mat-card-subtitle>{{book.author}}</mat-card-subtitle>
          </mat-card-header>
          
          <mat-card-content>
            <div class="book-info">
              <div class="book-cover" *ngIf="book.coverImageUrl">
                <img [src]="book.coverImageUrl" alt="{{book.title}} cover">
              </div>
              <div class="book-cover placeholder" *ngIf="!book.coverImageUrl">
                <mat-icon>menu_book</mat-icon>
              </div>
              
              <div class="book-details-info">
                <p><strong>ISBN:</strong> {{book.isbn}}</p>
                <p><strong>Category:</strong> {{book.category}}</p>
                <p><strong>Publisher:</strong> {{book.publisher}}</p>
                <p><strong>Published Year:</strong> {{book.publishedYear}}</p>
                <p><strong>Available Copies:</strong> {{book.availableCopies}} / {{book.totalCopies}}</p>
                <p class="book-description"><strong>Description:</strong> {{book.description}}</p>
              </div>
            </div>
          </mat-card-content>
          
          <mat-card-actions>
            <button mat-raised-button color="primary" [disabled]="book.availableCopies === 0 || !isLoggedIn" (click)="borrowBook()">
              Borrow
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
  
  <app-footer></app-footer>
</div>
